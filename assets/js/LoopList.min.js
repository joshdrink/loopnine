function LoopList(o){this.loops=[];for(var e=0;e<o.length;e++)this.loops.push(new Loop(o[e][0],o[e][1],o[e][2],o[e][3],!1,this));this.cued_loops=0,__this=this,window.addEventListener("loop_cued",function(){if(console.log("loop_cued"),__this.cued_loops++,console.log(__this),__this.cued_loops==__this.loops.length)for(var o=0;o<__this.loops.length;o++)__this.loops[o].playSound()})}function Loop(o,e,t,s,n){this.source=o,this.length=s,this.trigger=n,this.loaded=!1,this.volume=e,this.keyCode=t,this.bar_counter=1,this.load_buffer=function(){this.buffer_request=new XMLHttpRequest,this.buffer_request.open("GET",this.source,!0),this.buffer_request.responseType="arraybuffer";var o=this;this.buffer_request.onload=function(){context.decodeAudioData(o.buffer_request.response,function(e){o.audio_buffer=e,o.cue_sound(),console.log("loaded")}),document.addEventListener("keydown",function(e){e.keyCode==o.keyCode&&(1==o.gainNode.gain.value?(o.gainNode.gain.value=0,o.volume=0,document.getElementById(o.keyCode).classList.remove("active")):(o.gainNode.gain.value=1,o.volume=1,document.getElementById(o.keyCode).classList.add("active")))},!1)},this.buffer_request.send()},this.cue_sound=function(){this.loaded=!0;var o=new CustomEvent("loop_cued",{detail:{loop:this}});window.dispatchEvent(o)},this.playSound=function(){this.buffer_source=context.createBufferSource(),this.buffer_source.buffer=this.audio_buffer,this.gainNode=context.createGain(),this.buffer_source.connect(this.gainNode),this.gainNode.connect(context.destination),this.buffer_source.loop=!0,this.gainNode.gain.value=this.volume,this.buffer_source.start(0)},this.load_buffer()}function init(){try{window.AudioContext=window.AudioContext||window.webkitAudioContext,context=new AudioContext}catch(o){alert("Web Audio API is not supported in this browser")}}window.addEventListener("load",init,!1);var list=new LoopList([["/html5/audio/sound/mns1.wav",0,49,4],["/html5/audio/sound/mns2.wav",0,50,4],["/html5/audio/sound/mns3.wav",0,51,4],["/html5/audio/sound/mns4.wav",0,52,4],["/html5/audio/sound/mns5.wav",0,81,4],["/html5/audio/sound/mns6.wav",0,87,4],["/html5/audio/sound/mns7.wav",0,69,4],["/html5/audio/sound/mns8.wav",0,82,4],["/html5/audio/sound/mns9.wav",0,65,4],["/html5/audio/sound/mns10.wav",0,83,4],["/html5/audio/sound/mns11.wav",0,68,4],["/html5/audio/sound/mns12.wav",0,70,4],["/html5/audio/sound/mns13.wav",0,90,4],["/html5/audio/sound/mns14.wav",0,88,4],["/html5/audio/sound/mns15.wav",0,67,4],["/html5/audio/sound/mns16.wav",0,86,4]]);